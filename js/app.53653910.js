(function(){var t={6700:function(t,a,e){var s={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function o(t){var a=i(t);return e(a)}function i(t){if(!e.o(s,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=i,t.exports=o,o.id=6700},256:function(){},9358:function(t,a,e){"use strict";var s=e(6369),o=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/login"}},[t._v("Login")]),t.isLoggedIn?a("span",[t._v(" | "),a("a",{on:{click:t.logout}},[t._v("Logout")])]):t._e()],1),a("router-view")],1)},i=[],n={name:"App",components:{},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},methods:{logout:function(){this.$store.dispatch("logout").then((()=>{this.$router.push("/login")}))}}},r=n,l=e(1001),c=(0,l.Z)(r,o,i,!1,null,null,null),d=c.exports,h=e(2631),u=function(){var t=this,a=t._self._c;return a("div",{staticClass:"container"},[a("h3",[t._v("Прибыль/посещаемость")]),a("div",[a("p",[t._v(" Начальная дата: ")]),a("date-picker",{attrs:{valueType:"date"},model:{value:t.dateFrom,callback:function(a){t.dateFrom=a},expression:"dateFrom"}}),a("p",[t._v(" Конечная дата: ")]),a("date-picker",{attrs:{valueType:"date"},model:{value:t.dateTo,callback:function(a){t.dateTo=a},expression:"dateTo"}})],1),a("canvas",{ref:"mainChart"})])},f=[],g=e(4531),b=e.n(g),p=e(4852),m={name:"Analytics-test",components:{DatePicker:p.Z},data:()=>({dateFrom:new Date("2021-11-01"),dateTo:new Date,flagStartDate:!1,chartData:null,groupBy:"month",mychart:null,labels:[],dataset:{},draftData:null,data:[],datacollection:[],clubsId:["5c3c5e12ba86198828baa4a7","5c3c5e20ba86198828baa4c5","60353d6edbb58a135bf41856","61e9995d4ec0f29dc8447f81","61e999fc4ec0f29dc844835e"]}),methods:{draw(){this.mychart&&this.mychart.destroy();const t=this.$refs.mainChart;this.mychart=new(b())(t,{type:"line",data:{labels:this.labels,datasets:this.datacollection},options:{legend:{display:!0,position:"bottom"},responsive:!0,elements:{},scales:{xAxes:[{type:"time",display:!0,scaleLabel:{display:!1},ticks:{major:{fontStyle:"bold",fontColor:"#FF0000"}}}],yAxes:[{id:"y1",type:"linear",position:"left",display:!1},{id:"y2",type:"linear",position:"right",display:!1},{id:"y3",type:"linear",position:"left",display:!1},{id:"y4",type:"linear",position:"right",display:!1},{id:"y5",type:"linear",position:"left",display:!1},{display:!1,gridLines:{display:!1},scaleLabel:{display:!0,labelString:this.labelY},ticks:{min:0,beginAtZero:!0,stepSize:100}}]}}})},async clearData(){console.log("start clearing"),this.datacollection=[],this.labels=[],this.mychart.data.datasets=[],this.mychart.data.labels=[]},incomingsClub(t){switch(t){case"5c3c5e12ba86198828baa4a7":return{label:"Выручка Фрунзенской",borderColor:"#3e95cd",fill:!1};case"5c3c5e20ba86198828baa4c5":return{label:"Выручка Чернышевской",borderColor:"#8e5ea2",fill:!1};case"60353d6edbb58a135bf41856":return{label:"Выручка Василеостровской",borderColor:"#e8c3b9",fill:!1};case"61e9995d4ec0f29dc8447f81":return{label:"Выручка Московской",borderColor:"#3cba9f",fill:!1};case"61e999fc4ec0f29dc844835e":return{label:"Выручка Лесной",borderColor:"#c45850",fill:!1};case"all":return{label:"Выручка сети",borderColor:"#8e8786",fill:!1};default:return"Неизвестный клуб"}},async loadIncomings(t){try{for(let a in t){a=t[a];let e=this.dateFrom,s=this.dateTo,o=this.groupBy,i=!0,n=!0;await this.$store.dispatch("loadIncomings",{clubId:a,dateFrom:e,dateTo:s,groupBy:o,potential:i,definitely:n}),this.draftData=this.$store.state.incomings,0===this.labels.length&&this.getDates(),this.flagStartDate=!0,await this.getIncomings(a),this.flagStartDate=!1}this.getIncomingsTotal()}catch(a){console.error(a)}},getDates(){for(let t in this.draftData)if("items"===t)for(let a in this.draftData[t])this.labels.push(this.draftData[t][a].date.slice(0,7))},bindDataDates(t){return Array(t).fill(null)},getIncomings(t){for(let a in this.draftData)if("items"===a){for(let t in this.draftData[a]){let e=this.labels.indexOf(this.draftData[a][t].date.slice(0,7));if(this.flagStartDate&&e>0){let t=this.bindDataDates(e);this.data=this.data.concat(t)}this.data.push(this.draftData[a][t].amount),this.flagStartDate=!1}this.dataset.data=this.data,Object.assign(this.dataset,this.incomingsClub(t)),Object.assign(this.dataset,{yAxisID:"y1"}),this.datacollection.push(this.dataset),this.data=[],this.dataset={}}},getIncomingsTotal(){for(let t in this.datacollection){if(!this.data.length){this.data=this.datacollection[t].data;continue}const a=this.data,e=this.datacollection[t].data;let s;this.data=[],s=a.length>=e.length?a.length:e.length;for(let t=0;t<s;t++){const s=void 0===a[t]?0:a[t],o=void 0===e[t]?0:e[t];this.data.push(s+o)}}this.dataset.data=this.data,Object.assign(this.dataset,this.incomingsClub("all")),Object.assign(this.dataset,{yAxisID:"y1"}),this.datacollection.push(this.dataset),this.data=[],this.dataset={}},avgIncomingsClub(t){switch(t){case"5c3c5e12ba86198828baa4a7":return{label:"Средняя сумма за жизнь Фрунзенской",borderColor:"#3e95cd",fill:!1};case"5c3c5e20ba86198828baa4c5":return{label:"Средняя сумма за жизнь Чернышевской",borderColor:"#8e5ea2",fill:!1};case"60353d6edbb58a135bf41856":return{label:"Средняя сумма за жизнь Василеостровской",borderColor:"#e8c3b9",fill:!1};case"61e9995d4ec0f29dc8447f81":return{label:"Средняя сумма за жизнь Московской",borderColor:"#3cba9f",fill:!1};case"61e999fc4ec0f29dc844835e":return{label:"Средняя сумма за жизнь Лесной",borderColor:"#c45850",fill:!1};default:return"Неизвестный клуб"}},getDatesAvgIncome(){for(let t in this.draftData)this.labels.push(this.draftData[t].date.slice(0,7))},async loadAvgIncomings(t){try{for(let a in t){a=t[a];let e=this.dateFrom,s=this.dateTo,o=this.groupBy;await this.$store.dispatch("loadAvgIncome",{clubId:a,dateFrom:e,dateTo:s,groupBy:o}),this.draftData=this.$store.state.avgIncome,0===this.labels.length&&this.getDatesAvgIncome(),this.flagStartDate=!0,await this.getAvgIncomings(a),this.flagStartDate=!1}}catch(a){console.error(a)}},getAvgIncomings(t){for(let a in this.draftData){let t=this.labels.indexOf(this.draftData[a].date.slice(0,7));if(this.flagStartDate&&t>0){let a=this.bindDataDates(t);this.data=this.data.concat(a)}this.data.push(this.draftData[a].avgIncome),this.flagStartDate=!1}this.dataset.data=this.data,Object.assign(this.dataset,this.avgIncomingsClub(t)),Object.assign(this.dataset,{yAxisID:"y2",hidden:!0}),this.datacollection.push(this.dataset),this.data=[],this.dataset={}},avgPaymentsClub(t){switch(t){case"5c3c5e12ba86198828baa4a7":return{label:"Среднее кол-во оплат Фрунзенской",borderColor:"#3e95cd",fill:!1};case"5c3c5e20ba86198828baa4c5":return{label:"Среднее кол-во оплат Чернышевской",borderColor:"#8e5ea2",fill:!1};case"60353d6edbb58a135bf41856":return{label:"Среднее кол-во оплат Василеостровской",borderColor:"#e8c3b9",fill:!1};case"61e9995d4ec0f29dc8447f81":return{label:"Среднее кол-во оплат Московской",borderColor:"#3cba9f",fill:!1};case"61e999fc4ec0f29dc844835e":return{label:"Среднее кол-во оплат Лесной",borderColor:"#c45850",fill:!1};default:return"Неизвестный клуб"}},async loadAvgPayments(t){try{for(let a in t){a=t[a];let e=this.dateFrom,s=this.dateTo,o=this.groupBy;await this.$store.dispatch("loadAvgIncome",{clubId:a,dateFrom:e,dateTo:s,groupBy:o}),this.draftData=this.$store.state.avgIncome,0===this.labels.length&&this.getDatesAvgIncome(),this.flagStartDate=!0,await this.getAvgPayments(a),this.flagStartDate=!1}}catch(a){console.error(a)}},getAvgPayments(t){for(let a in this.draftData){let t=this.labels.indexOf(this.draftData[a].date.slice(0,7));if(this.flagStartDate&&t>0){let a=this.bindDataDates(t);this.data=this.data.concat(a)}this.data.push(this.draftData[a].avgPayments),this.flagStartDate=!1}this.dataset.data=this.data,Object.assign(this.dataset,this.avgPaymentsClub(t)),Object.assign(this.dataset,{yAxisID:"y3",hidden:!0}),this.datacollection.push(this.dataset),this.data=[],this.dataset={}},avgAttendanceClub(t){switch(t){case"5c3c5e12ba86198828baa4a7":return{label:"Посещаемость Фрунзенской",borderColor:"#3e95cd",fill:!1};case"5c3c5e20ba86198828baa4c5":return{label:"Посещаемость Чернышевской",borderColor:"#8e5ea2",fill:!1};case"60353d6edbb58a135bf41856":return{label:"Посещаемость Василеостровской",borderColor:"#e8c3b9",fill:!1};case"61e9995d4ec0f29dc8447f81":return{label:"Посещаемость Московской",borderColor:"#3cba9f",fill:!1};case"61e999fc4ec0f29dc844835e":return{label:"Посещаемость Лесной",borderColor:"#c45850",fill:!1};default:return"Неизвестный клуб"}},async loadAvgSchedule(t){try{for(let a in t){a=t[a];let e=this.dateFrom,s=this.dateTo,o=this.groupBy;await this.$store.dispatch("loadAvgSchedule",{clubId:a,dateFrom:e,dateTo:s,groupBy:o}),this.draftData=this.$store.state.avgShedule,0===this.labels.length&&this.getDatesAvgIncome(),this.flagStartDate=!0,await this.getAvgAttendance(a),this.flagStartDate=!1}}catch(a){console.error(a)}},getAvgAttendance(t){for(let a in this.draftData){let t=this.labels.indexOf(this.draftData[a].date.slice(0,7));if(this.flagStartDate&&t>0){let a=this.bindDataDates(t);this.data=this.data.concat(a)}this.data.push(this.draftData[a].avg),this.flagStartDate=!1}this.dataset.data=this.data,Object.assign(this.dataset,this.avgAttendanceClub(t)),Object.assign(this.dataset,{yAxisID:"y4",hidden:!0}),this.datacollection.push(this.dataset),this.data=[],this.dataset={}},participantsCountClub(t){switch(t){case"5c3c5e12ba86198828baa4a7":return{label:"Тренировок на Фрунзенской",borderColor:"#3e95cd",fill:!1};case"5c3c5e20ba86198828baa4c5":return{label:"Тренировок на Чернышевской",borderColor:"#8e5ea2",fill:!1};case"60353d6edbb58a135bf41856":return{label:"Тренировок на Василеостровской",borderColor:"#e8c3b9",fill:!1};case"61e9995d4ec0f29dc8447f81":return{label:"Тренировок на Московской",borderColor:"#3cba9f",fill:!1};case"61e999fc4ec0f29dc844835e":return{label:"Тренировок на Лесной",borderColor:"#c45850",fill:!1};default:return"Неизвестный клуб"}},async loadTrainings(t){try{for(let a in t){a=t[a];let e=this.dateFrom,s=this.dateTo,o=this.groupBy;await this.$store.dispatch("loadAvgSchedule",{clubId:a,dateFrom:e,dateTo:s,groupBy:o}),this.draftData=this.$store.state.avgShedule,0===this.labels.length&&this.getDatesAvgIncome(),this.flagStartDate=!0,await this.getParticipantsCount(a),this.flagStartDate=!1}}catch(a){console.error(a)}},async getParticipantsCount(t){for(let a in this.draftData){let t=this.labels.indexOf(this.draftData[a].date.slice(0,7));if(this.flagStartDate&&t>0){let a=await this.bindDataDates(t);this.data=this.data.concat(a)}this.data.push(this.draftData[a].participantsCount),this.flagStartDate=!1}this.dataset.data=this.data,Object.assign(this.dataset,this.participantsCountClub(t)),Object.assign(this.dataset,{yAxisID:"y5",hidden:!0}),this.datacollection.push(this.dataset),this.data=[],this.dataset={}},async updateCharts(){await this.clearData(),await this.loadIncomings(this.clubsId),await this.loadAvgIncomings(this.clubsId),await this.loadAvgPayments(this.clubsId),await this.loadAvgSchedule(this.clubsId),await this.loadTrainings(this.clubsId),this.$nextTick((()=>{this.mychart.data.datasets=this.datacollection,this.mychart.data.labels=this.labels,this.mychart.update()}))}},watch:{dateFrom(){this.updateCharts()},dateTo(){this.updateCharts()}},async mounted(){await this.loadIncomings(this.clubsId),await this.loadAvgIncomings(this.clubsId),await this.loadAvgPayments(this.clubsId),await this.loadAvgSchedule(this.clubsId),await this.loadTrainings(this.clubsId),this.$nextTick((()=>{this.draw()}))},created(){}},j=m,y=(0,l.Z)(j,u,f,!1,null,null,null),v=y.exports,w=function(){var t=this,a=t._self._c;return a("div",[a("form",{staticClass:"login",on:{submit:function(a){return a.preventDefault(),t.login.apply(null,arguments)}}},[a("h1",[t._v("Sign in")]),a("label",[t._v("Mobile")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{required:"",type:"tel",placeholder:"mobile phone"},domProps:{value:t.mobile},on:{input:function(a){a.target.composing||(t.mobile=a.target.value)}}}),a("label",[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{required:"",type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}}),a("hr"),a("button",{attrs:{type:"submit"}},[t._v("Login")])])])},I=[],D={data(){return{mobile:"",password:""}},methods:{login:async function(){let t=this.mobile,a=this.password;try{await this.$store.dispatch("login",{login:t,password:a}),this.$router.push("/secure")}catch(e){console.log(e)}}}},k=D,C=(0,l.Z)(k,w,I,!1,null,null,null),S=C.exports,A=function(){var t=this,a=t._self._c;t._self._setupProxy;return a("h1",[t._v("It's common page. Start your work.")])},T=[],x=e(256),_=e.n(x),O=_(),$=(0,l.Z)(O,A,T,!1,null,null,null),z=$.exports;s.ZP.use(h.Z);let P=new h.Z({mode:"history",routes:[{path:"/",name:"home",component:z},{path:"/login",name:"login",component:S},{path:"/secure",name:"secure",component:v,meta:{requiresAuth:!0}}]});var F=P,B=e(3822),U=e(6265),Z=e.n(U);const L="https://api.rangedev.ru";s.ZP.use(B.ZP);var E=new B.ZP.Store({state:{trainings:[],incomings:[],sources:[],avgShedule:[],metro:[],conversion:[],avgIncome:[],status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{UpdateTrainingsInfo(t,a){t.trainings=a},UpdateIncomingsInfo(t,a){t.incomings=a},UpdateSourcesInfo(t,a){t.sources=a},UpdateAvgScheduleInfo(t,a){t.avgShedule=a},UpdateMetroInfo(t,a){t.metro=a},UpdateConversionInfo(t,a){t.conversion=a},UpdateAvgIncomeInfo(t,a){t.avgIncome=a},auth_request(t){t.status="loading"},auth_success(t,a,e){t.status="success",t.token=a,t.user=e},auth_error(t){t.status="error"},logout(t){t.status="",t.token=""}},getters:{isLoggedIn:t=>!!t.token,authStatus:t=>t.status},actions:{async loadTrainings(t){return await Z().post(`${L}/analytics.trainings`,{},{params:{token:t.state.token},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((a=>{t.commit("UpdateTrainingsInfo",a.data)})).catch((function(t){console.log(t.response)}))},async loadIncomings(t,a){return await Z().post(`${L}/analytics.incomings`,{},{params:{token:t.state.token,club:a.clubId,dateStarts:a.dateFrom,dateEnds:a.dateTo,groupBy:a.groupBy},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((a=>{t.commit("UpdateIncomingsInfo",a.data)})).catch((function(t){console.log(t)}))},async loadSources(t,a){return await Z().post(`${L}/analytics.getSources`,{},{params:{token:t.state.token,club:a.clubId,dateStarts:a.dateFrom,dateEnds:a.dateTo},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((a=>{t.commit("UpdateSourcesInfo",a.data)})).catch((function(t){console.log("loadSources",t.response.data.error),console.log(t.response)}))},async loadAvgSchedule(t,a){return await Z().post(`${L}/analytics.avgSchedule`,{},{params:{token:t.state.token,club:a.clubId,dateStarts:a.dateFrom,dateEnds:a.dateTo,groupBy:a.groupBy},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((a=>{t.commit("UpdateAvgScheduleInfo",a.data)})).catch((function(t){console.log("loadAvgSchedule",t.response.data.error),console.log(t.response)}))},async loadAvgIncome(t,a){return await Z().post(`${L}/analytics.avgIncome`,{},{params:{token:t.state.token,club:a.clubId,dateStarts:a.dateFrom,dateEnds:a.dateTo,groupBy:a.groupBy},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((a=>{t.commit("UpdateAvgIncomeInfo",a.data)})).catch((function(t){console.log("loadAvgIncome",t.response.data.error),console.log(t.response)}))},async loadConversion(t,a){return await Z().post(`${L}/analytics.getConversion`,{},{params:{token:t.state.token,club:a.clubId,dateStarts:a.dateFrom,dateEnds:a.dateTo,groupBy:a.groupBy},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((a=>{t.commit("UpdateConversionInfo",a.data)})).catch((function(t){console.log(t.response.data.error),console.log(t.response)}))},async loadMetro(t){return await Z().post(`${L}/analytics.metro`,{},{params:{token:t.state.token},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((a=>{t.commit("UpdateMetroInfo",a.data)})).catch((function(t){console.log(t)}))},login({commit:t},a){t("auth_request"),Z().post(`${L}/account.auth`,{},{params:{login:a.login,password:a.password,clientId:1},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((e=>{const s=e.data.access_token;localStorage.setItem("token",s),t("auth_success",s,a)})).catch((()=>{t("auth_error"),localStorage.removeItem("token")}))},logout({commit:t}){return new Promise((a=>{t("logout"),localStorage.removeItem("token"),delete Z().defaults.headers.common.Authorization,a()}))}}});s.ZP.config.productionTip=!1,s.ZP.prototype.$http=Z(),new s.ZP({store:E,router:F,render:t=>t(d)}).$mount("#app")}},a={};function e(s){var o=a[s];if(void 0!==o)return o.exports;var i=a[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}e.m=t,function(){var t=[];e.O=function(a,s,o,i){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],o=t[d][1],i=t[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(e.O).every((function(t){return e.O[t](s[l])}))?s.splice(l--,1):(r=!1,i<n&&(n=i));if(r){t.splice(d--,1);var c=o();void 0!==c&&(a=c)}}return a}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,o,i]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};e.O.j=function(a){return 0===t[a]};var a=function(a,s){var o,i,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(a){return 0!==t[a]}))){for(o in r)e.o(r,o)&&(e.m[o]=r[o]);if(l)var d=l(e)}for(a&&a(s);c<n.length;c++)i=n[c],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(d)},s=self["webpackChunkanalytics"]=self["webpackChunkanalytics"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=e.O(void 0,[998],(function(){return e(9358)}));s=e.O(s)})();
//# sourceMappingURL=app.53653910.js.map